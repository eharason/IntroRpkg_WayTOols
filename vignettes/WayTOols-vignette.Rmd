---
title: "Introduction to WayTOols"
author: "Emily Harason"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Introduction to WayTOols}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---
## Introduction

WayTOols was developed for researchers dealing with data from an experiment carried out with the mobile application "WayTO" from the University of Münster. This package contains useful functions for interpreting the data, otherwise known as "logfiles", that are created each time a user of the WayTO mobile application interacts with the app.

This vignette will describe how users can use the WayTOols package to interpret logfile data created from the WayTO mobile application and subsequent orientation experiment. Logfiles depict all the interactions a user makes with the digital map, and can be exported at any time. For the orientation experiment, logfiles were exported after each participant completed the navigational portion of the experiment with the WayTO app (generally after less than one hour of map interaction). WayTOols enables users to choose a target user ID (a specific participant) and return information about their map interactions, specifically Zoom level, Pan, Clicked on Marker and Clicked on Map. In order to use functions within the package, one must follow the ImportData specifications, or load a pre-organized `logfile_data` file into their workspace using data(logfile_data). Help can be found through the help command. 

### Background: 
<b>WayTO mobile application</b>

WayTO is a mobile application that can be downloaded to your Android smartphone. It mainly acts as a navigational tool for users to orient themselves with respect to a base map for the city of Münster, NRW, Germany. Users can interact with the map by zooming and panning, typical of many navigational mobile applications, and they also have the option to click on landmarks. Landmarks are clearly displayed as click-able points integrated into the app, where users have the option to click on the point to discover more information about it (e.g. what is the name of the landmark that is located at these geographic coordinates). 

A logfile is created each time the app is opened, and it records all the interactions the user makes with the WayTO map. This means that if a user zooms in to a location, the zoom is recorded as well as the time, zoom level, as well as the user's ID. This logfile can be exported to a textfile and attached to an email after the user is finished interacting with the app. The logfile data can then be read and organized into a data.frame in R, after which WayTOols can be used to analyze the interactions among each user. 

<b>WayTO orientation experiment</b>

The WayTO app is the basis for a Wayfinding and Navigation experiment organized by the Spatial Intelligence Lab at the Institute for Geoinformatics, University of Münster. The objective of the study is to discover orientation by use of a digital map, where
participants must follow a given route. 

To acquire participants, an email was sent to friends, family, and student colleagues from the University of Münster. In recognition of the contribution of each participant to the experiment, participants received compensation of €10/hour. The experiment lasted approximately one hour in length and was conducted on a pre-defined outdoor route. Users were given written directions (e.g. "Take the first right" and "Take the first right and follow the street until the end") in which they were instructed to use the map as they needed. Click-able points depicting landmarks enabled participants to orient themselves with respect to well-known, recognizable features and objects on the landscape. 

## Description 

To begin, users must have data in the `data.frame` format used by WayTOols. This data should be named `logfile_data`. Because WayTOols is specifically built to manage text files generated by the WayTO application, all files must include the following column names: 

 * ID
 * Action
 * Landmark
 * Time
 * Zoom
 * Latitude
 * Longitude
 
To import logfile data, users can follow instructions laid out in the ImportData vignette, or load the pre-organized `logfile_data` into their workspace. 

```{r message=FALSE}
require(dplyr)
require(WayTOols)
data(logfile_data)
head(logfile_data, 5)
```

As can be seen, there are 10 column names. 

```{r message=FALSE}
colnames(logfile_data)
```

Three additional columns have been added: `Zoomed`, `Panned` and `WithOffScreenMarkers`. `Zoomed` and `Panned` return a TRUE/FALSE value to tell the user which interaction step is a Zoom and/or a Pan. `WithOffScreenMarkers` returns TRUE if there is an `a` or `w` attached to the ID, meaning `with` off-screen markers. Otherwise, it returns false. Users can choose to create a new `data.frame` with a summary of the Zoomed and Panned information.

```{r message=FALSE}
logfile.interactions <- cbind(logfile_data)[, c("ID", "Zoomed", "Panned", "WithOffScreenMarkers")]

require(dplyr)
countZP.dataframe <- logfile.interactions %>% group_by(ID) %>% 
  summarise(sumZoomed = sum(Zoomed, na.rm=TRUE), 
            sumPanned = sum(Panned, na.rm=TRUE)) 
```
 
While the above `countZP.dataframe` provides an excellent overview to the data, it can get overwhelming with all the data files. WayTOols therefore provides functions so that the user can easily analyze the data. 

```{r message=FALSE}
summary(logfile_data$ID)
head(byID.interactions(logfile_data, ID = "11a"), 10)
byTime.entries(logfile_data, ID="9w")
sum.interactions(logfile_data, ID = "10wo")
mean.interactions(logfile_data, ID = "15w")

x <- as.numeric(logfile_data$Zoom, ID="3w")
x <- head(x, 50)
mean(x)
```

The above functions were designed to display simple interaction information to ease in the analysis of the logfile data. In addition, a couple of S4 methods were created including `meanZoom` and `countZoom`. 

## Plots

```{r plot, dpi=100, fig.width=7, message=FALSE}

require(ggmap)
require(ggplot2)

ggplot(logfile_data, aes(factor(ID), Zoom)) + 
  geom_boxplot() + 
  xlab("User")+
  ggtitle("Zoom factor across different Users")

plot.interactions(logfile_data, ID="4a")
```

In the end, WayTOols is an extremely useful package for anyone wishing to 
analyze the interaction data generate from the logfiles on the WayTO mobile application. 
